!function(t){"use strict";function e(e,r){s=!1,l=t.extend({letterSpacing:.5,fontSize:90,cutText:"â€¦",dataAttr:"flexText",addTitle:!0,verbose:!1},r),n(e),i(e)}function n(t){var e={"overflow-y":"hidden","line-height":"1em",height:"auto","padding-top":0,"padding-bottom":"2px"};if(!parseInt(t.css("max-height"),10))throw Error("max-height should be defined");t.css(e),r("styles added to flexText element: ",JSON.stringify(e))}function i(t){var e=t.data(l.dataAttr);e?t.text(e):t.data(l.dataAttr,t.text()),t.data("flexTextConfig",l);for(var n in l)if(l[n]!==!1&&s===!1){var i=l[n];"letterSpacing"==n?a(t,i):"fontSize"==n?o(t,i):"cutText"==n&&f(t,i)}}function r(t){l.verbose&&window.console&&console.log("[flexText]",t)}function a(t,e){for(var n,i=t.css("letterSpacing")||0,a=e||.5,o=-.1;o>=-a;o-=.1){if(c(t))return s=!0;n=(i-o).toFixed(1),t.css("letterSpacing","-"+n+"px"),r("changing letterSpacing to -"+n+"px")}}function o(t,e){for(var n=e||90,i=99;i>=n;i-=2){if(c(t))return s=!0;t.css("fontSize",i+"%"),r("changing fontSize to "+i+"%")}}function f(e,n){var i,a=e.data(l.dataAttr);l.addTitle&&e.attr("title",a);for(var o=a.length;o>0;o--){if(c(e))return s=!0;a=e.text(),i=a.length-(2+n.length),e.text(t.trim(a.substr(0,i))+n),r("cutting text to "+i+" chars")}}function c(t){var e=t.get(0).scrollHeight,n=parseInt(t.css("fontSize")),i=e%n;return t.get(0).scrollHeight>t.height()+i?!1:!0}var s,l;t.fn.flexText=function(n){return this.each(function(){e(t(this),n)})}}(jQuery);